<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Keith A. Lewis" />
  <title>Unified Mathematical Finance</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>
  <link rel="stylesheet" href="math.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans&family=STIX+Two+Text&display=swap" rel="stylesheet">
  <script defer=""
  src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
  <script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: true
   });
}}});
  </script>
  <link rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Unified Mathematical Finance</h1>
<p class="author">Keith A. Lewis</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#unified-mathematical-finance">Unified Mathematical
Finance</a>
<ul>
<li><a href="#datetime">Date/Time</a></li>
<li><a href="#instrument"><span>Instrument</span></a></li>
<li><a href="#transaction">Transaction</a></li>
</ul></li>
</ul>
</nav>
<h1 id="unified-mathematical-finance">Unified Mathematical Finance</h1>
<p>Mathematical Finance provides a rigourous model for quanifying the
problems of how to move cash flows through time, how much it costs, and
how risky that is. The classical Black-Scholes/Merton approach assumes
optimal hedging strategies executed in “continuous” time. A model more
faithful to trading reality should allow for non-optimal strategies and
the fact that continuous time hedging is not possible.</p>
<h2 id="datetime">Date/Time</h2>
<p>A <em>date</em>, or <em>datetime</em>, is an absolute time. Universal
Coordinated Time, or UTC, can be used for this. The permuted acronym has
an interesting history, as do all matters involved with measuring dates
and times.</p>
<p>The difference of two dates is a <em>time period</em>. An
<em>epoch</em> date can be used to convert between dates and times. The
epoch corresponds to time 0 and the date is a time period offset from
that. It is common to work with time in years, although years is not a
proper time period since it may involve leap days. Likewise, using
seconds has a similar problem because of leap seconds.</p>
<h2 id="instrument"><a
href="https://ifrscommunity.com/knowledge-base/financial-instruments-definitions/">Instrument</a></h2>
<p>Instruments are contracts that provide ownership of a financial asset
to the holder and a financial liability of the instrument issuer.</p>
<p>The most fundamental instrument is cash in a particular currency.
Stocks provide equity in the issuing company. Bonds are a contractual
right to coupons and final principal repayment by the issuer. A
commodity is not an instrument, but a forward rate agreement to exchange
cash for the commodity at the termination date of the contract is. These
instruments are backed by tangible assets. Convertible bonds, asset
backed securities, and structured products are hybrid intruments.
Classical derivitive instruments are options, forwards, and futures.</p>
<p>A derivative contract specifies the cash flows between the buyer and
the seller as a function of other instruments. If a derivative is not
traded in the market then there is a mathematical theory originally
developed by Black, Scholes, and Merton to approximate its
<em>value</em>. A sell-side trader can use that, plus vigorish, to quote
prices.</p>
<p>There is a credit component to every intrument. Either party might
default on their contractual obligations and only provide partial
repayment. This can be modeled using <em>default time</em> and
<em>recovery</em>.</p>
<h2 id="transaction">Transaction</h2>
<p>The atoms of finance are <em>holdings</em>, an amount of some
instrument and who owns it. Holdings interact via <em>transactions</em>,
a swap of holdings between a buyer and a seller on some date.</p>
<p>A <em>transaction</em> is a <em>buyer</em> and a <em>seller</em>
exchanging holding at a <em>transacton time</em>. The transaction <span
class="math inline">\chi = (t;a, i, o; a&#39;, i&#39;, o&#39;)</span>
indicates the <em>buyer</em> swapped the holding <span
class="math inline">(a, i, o)</span> for the holding <span
class="math inline">(a&#39;, i&#39;, o&#39;)</span> with the
<em>seller</em> at time <span class="math inline">t</span>. At
<em>settlement</em> <span class="math inline">u &gt; t</span> the buyer
holds <span class="math inline">(a&#39;,i&#39;,o)</span> and the seller
holds <span class="math inline">(a,i,o&#39;)</span>. The <em>price</em>
of the transaction is <span class="math inline">X = a/a&#39;</span> so
<span class="math inline">\chi = (t;Xa&#39;, i, o; a&#39;, i&#39;,
o&#39;)</span>. The price depends on the time executed, the buyer
instrument, and the amount of the seller instrument. Prices are
determined by the seller. The buyer decides when to exchange holdings
based on the seller’s price, among other considerations.</p>
<p>Owning an instrument entails <em>cash flows</em>. Stocks pay
dividends or incur borrow costs when shorted. Bonds pay coupons.
Currencies do not have cash flows. Commodities may have storage costs.
Futures cash flows are the daily margin adjustents. The price of a
futures is always zero. Cash flows are added to holdings in proportion
to the amount of the instrument.</p>
<p>Cash flows are transactions between the buyer and the issuer that are
triggered by contractual obligations instead of trading events. If
issuer <span class="math inline">o&#39;</span> pays cash flow <span
class="math inline">C</span> in units of instrument <span
class="math inline">i</span> at time <span class="math inline">t</span>
then all holders of <span class="math inline">(a, i&#39;, o)</span> are
subject to a transaction <span class="math inline">(t;0, i, o; Ca, i,
o&#39;)</span>. After payment the buyer holds <span
class="math inline">\{(a,i&#39;,o),(Ca,i,o)\}</span> and the issuer
holds <span class="math inline">(0,i,o&#39;)</span>.</p>
<p>Given a <em>portfolio</em> of holdings <span
class="math inline">\{(a_j, i_j, o_j)\}</span> define the <em>net
amount</em> of asset <span class="math inline">i</span> held by entity
<span class="math inline">o</span> to be <span class="math display">
    N(i, o) = \sum \{a_j\mid i_j = i, o_j = o\}.
</span> Transactions and cash flows change a set of holding over time.
If transaction <span class="math inline">\chi = (t;a, i, o; a&#39;,
i&#39;, o&#39;)</span> settles at <span class="math inline">u &gt;
t</span> then the set of holdings at <span class="math inline">u</span>
now includes <span class="math inline">\{(-a, i, o), (a&#39;, i&#39;,
o), (-a&#39;, i&#39;, o&#39;), (a, i, o&#39;)\}</span>. The holdings
with negative signs are often netted with existing buyer and seller
holdings. This assumes the holdings <span class="math inline">(a_0, i,
o)</span> and <span class="math inline">(a_1, i, o)</span> can be
combined to the holding <span class="math inline">(a_0 + a_1, i,
o)</span>. This is close to being true when <span
class="math inline">a_0 &gt; 0</span> and <span class="math inline">a_1
&gt; -a_0</span>, but that, and every, assumption should be made
explicit.</p>
<p>To <em>mark-to-market</em> a portfolio fix an instrument <span
class="math inline">i_0</span> and posit a set of “prices” <span
class="math inline">X(i_0,i)</span> for converting each instrument <span
class="math inline">i</span> to <span class="math inline">i_0</span>. We
assume <span class="math inline">X(i_0,i_0) = 1</span>. The
mark-to-market value in terms of <span class="math inline">i_0</span>
for entity <span class="math inline">o</span> is <span
class="math display">
    M(i_0, o) = \sum_{i} X(i_0, i) N(i,o).
</span> This is the net value after converting each holding <span
class="math inline">(a,i,o)</span> to <span
class="math inline">X(i_0,i)a,i_0,o)</span> at price <span
class="math inline">X(i_0,i)</span>, assuming that is possible. We use
“price” since there may be no market price available.</p>
<p>The <em>profit-and-loss</em> (P&amp;L) per instrument and holder over
the period <span class="math inline">[t, u]</span> is <span
class="math inline">N_u(i,o) - N_t(i,o)</span>. This can also be
marked-to-market using prices specified at the beginning and end of the
period to get the P&amp;L <span class="math inline">M_u(i_0,o) -
M_t(i_0,o)</span> in terms of <span class="math inline">i_0</span>.</p>
<!--
### Examples

...

## Discount

_Discount_ is the cost of moving 1 unit of some currency in the future
to time 0.
Let $D(u)$ be the price of a _zero coupon bond_ that pays 1 unit at time $u$.
It is not the case that zero coupon bonds of all maturities trade
but it is useful to construct a _discount curve_ $u\mapsto D(u)$
to approximate the price. Discount
can be expressed in terms of the _forward curve_ $f(t)$ defined by
$D(u) = \exp(-\int_0^u f(t)\,dt)$ or the _spot curve_ $r(t)$ defined
by $D(u) = \exp(-u r(u))$.

__Exercise__. _Show $f(t) = -d(\log D(t))/dt$ and $r(t) = -(\log D(t)/t)$_.

__Exercise__. _Show $r(t) = (1/t)\int_0^t f(s)\,ds$ and $f(t) = r(t) + tr'(t)$_.

A _fixed income instrument_ is a portfolio of zero coupon bonds
paying cash flows $c_k$ at times $u_k$. If the price of the bond is $p$ then
$p = \sum_k c_k D(u_k)$.
Given a set of fixed income instruments with prices $p_j$ and
cash flows $c_{jk}$ at times $u_{jk}$, $0\le k < n_j$. We wish to find a discount
curve that reprices each instrument
$$
    p_j = \sum_k c_{jk} D(u_{jk}), \text{ for all } j.
$$
This problem is highly underdetermined, but the _bootstrap_ method provides a unique solution.

## Bootstrap

Assume $u{jk}


## UNFILED

Vector space
    Linear transformation
    Dual space
    Frechet derivative

Measure
    $B(S)^* \cong ba(S)$
    Algebra of sets - partial information

Probability 
    Random variable
    Random variables
    Stochastic process
    Stochastic integral

$X_t = M_t - \sum_{s\le t}C_s D_s$.

TwoBitCoin

Send through Switzerland. Buy tax law from cantons.

https://bam.kalzumeus.com/archive/moving-money-internationally/
-->
</body>
</html>
